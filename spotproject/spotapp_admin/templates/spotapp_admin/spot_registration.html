{% load static %}
<head>
    <link href="{% static 'css/spot_regist.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
{% block body %}
<div class="home-btn">
    <a href="{% url 'spotapp_admin:index' %}">ãƒ›ãƒ¼ãƒ </a>
</div>

<div class="spot_registration-container">
  <div class="spot_registration-form">
        <h2>è¦³å…‰åœ°ç™»éŒ²</h2>

      <form class="form-box" method="POST" enctype="multipart/form-data" action="{% url 'spotapp_admin:spot_registration' %}">

        {% if spot_form.errors %}
            <div class="error">
                {{ spot_form.errors }}
            </div>
        {% endif %}

        {% if photo_form.errors %}
            <div class="error">
                {{ photo_form.errors }}
            </div>
        {% endif %}
        
      {% csrf_token %}

      {{ spot_form.spot_name }}
      {{ spot_form.address }}
      {{ spot_form.business_hours }}
      {{ spot_form.explanation }}
 
    <p>åœ°åŒºã‚’é¸æŠã—ã¦ãã ã•ã„</p>
    {{ spot_form.district }}
     <!-- ğŸŒ ã“ã“ã«åœ°å›³ã‚’è¿½åŠ  -->
      <p>åœ°å›³ã§å ´æ‰€ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
      <div id="map" style="height:350px; margin-bottom:15px;"></div>

      {{ spot_form.latitude }}
      {{ spot_form.longitude }}
    <div class="category-list">
      <p>ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
      {{ spot_form.category }}
    </div>
      <p>å†™çœŸã‚’ç™»éŒ²ã—ã¦ãã ã•ã„</p>
      {{ photo_form.image }}

      <button type="submit">ç™»éŒ²</button>
      </form>
  </div>
</div>

<!-- JSã¯ã“ã“ -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
const map = L.map('map').setView([35.681236, 139.767125], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap'
}).addTo(map);

let marker;

map.on('click', function(e){
    if(marker){
        marker.setLatLng(e.latlng);
    } else {
        marker = L.marker(e.latlng).addTo(map);
    }

    document.getElementById("id_latitude").value = e.latlng.lat;
    document.getElementById("id_longitude").value = e.latlng.lng;
});
</script>


{% endblock %}
