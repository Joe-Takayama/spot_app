{% extends 'base/base.html' %}
{% load static %}
{% block title %}ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/event_detail.css' %}">
{% endblock %}

{% block body %}

<header class="detail-header">
    <a href="{% url 'spotapp:event_chart' %}" class="back-btn">â† ä¸€è¦§ã¸æˆ»ã‚‹</a>
</header>

<main class="detail-container">

    {# ã‚¤ãƒ™ãƒ³ãƒˆå #}
    <h1 class="event-title">{{ event.event_name }}</h1>

    {# ãƒ¡ã‚¤ãƒ³ç”»åƒï¼šè¦³å…‰åœ°ã®1æšç›®ã‚’æµç”¨ï¼ˆãªã‘ã‚Œã°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰ #}
    <div class="main-photo-box">
        {% if spot and spot.spot_photos.first %}
            <img src="{{ spot.spot_photos.first.image.url }}" alt="{{ spot.spot_name }}">
        {% else %}
            <p>ã‚¤ãƒ™ãƒ³ãƒˆå†™çœŸãŒã‚ã‚Šã¾ã›ã‚“</p>
        {% endif %}
    </div>

    {# åŸºæœ¬æƒ…å ± #}
    <div class="info-section">

        <div class="info-row">
            <span class="info-label">ä½æ‰€</span>
            <span class="info-value">
                {% if event.address %}
                    {{ event.address }}
                {% else %}
                    æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">å–¶æ¥­æ™‚é–“</span>
            <span class="info-value">
                {% if event.event_time %}
                    {{ event.event_time }}
                {% else %}
                    æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">é–‹å‚¬æ—¥</span>
            <span class="info-value">
                {% if event.event_start and event.event_end %}
                    {{ event.event_start|date:"Yå¹´næœˆjæ—¥" }} ï½ {{ event.event_end|date:"Yå¹´næœˆjæ—¥" }}
                {% else %}
                æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">ä¼šå ´</span>
            <span class="info-value">
                {% if event.venue %}
                    {{ event.venue }}
                {% else %}
                    æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">ä¸»å‚¬è€…</span>
            <span class="info-value"></span>
            {% if event.organizer %}
                {{ event.organizer }}
            {% else %}
                æœªç™»éŒ²
            {% endif %}
        </div>

        <div class="info-row">
            <span class="info-label">å£ã‚³ãƒŸ</span>
            {% if spot %}
                {# â˜… ã“ã“ã‚’ review_detail ã«é£›ã°ã™ #}
                <a href="{% url 'spotapp:review_detail' spot.spot_id %}" class="info-link">
                    å£ã‚³ãƒŸã‚’è¦‹ã‚‹
                </a>
            {% else %}
                <span class="info-value">å£ã‚³ãƒŸãªã—</span>
            {% endif %}
        </div>

        <div class="info-row">
            <span class="info-label">è©•ä¾¡</span>
            <span class="info-value">
                {% if avg_rating %}
                    â­ {{ avg_rating|floatformat:1 }}ï¼ˆ{{ review_count }}ä»¶ï¼‰
                {% else %}
                    è©•ä¾¡ãªã—
                {% endif %}
            </span>
        </div>

        {# è¦³å…‰åœ°ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ #}
        {% if spot %}
        <div class="spot-link-area">
            <a href="{% url 'spotapp:spot_detail' spot.spot_id %}"
               class="spot-link-btn">
                ğŸ“ ã“ã®è¦³å…‰åœ°ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ â†’
            </a>
        </div>
        {% endif %}

    </div>

    {# ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°èª¬æ˜ï¼šEvents.details ã‚’ä½¿ã† #}
    <section class="section-box">
        <h2>ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°èª¬æ˜</h2>
        {% if event.details %}
            <p>{{ event.details|linebreaksbr }}</p>
        {% else %}
            <p>ã‚¤ãƒ™ãƒ³ãƒˆã®èª¬æ˜ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
        {% endif %}
    </section>



</main>

{% endblock %}
