{% extends 'base/base.html' %}
{% load static %}
{% block title %}ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/event_detail.css' %}">
{% endblock %}

{% block body %}

<header class="detail-header">
    <a href="{% url 'spotapp:event_chart' %}" class="back-btn">â† ä¸€è¦§ã¸æˆ»ã‚‹</a>
</header>

<main class="detail-container">

    {# ã‚¤ãƒ™ãƒ³ãƒˆå #}
    <h1 class="event-title">{{ event.event_name }}</h1>

    {# ãƒ¡ã‚¤ãƒ³ç”»åƒï¼šã¨ã‚Šã‚ãˆãšè¦³å…‰åœ°ã®1æšç›®ã‚’å‡ºã™ï¼ˆãªã‘ã‚Œã°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰ #}
    <div class="main-photo-box">
        {% if spot and spot.spot_photos.first %}
            <img src="{{ spot.spot_photos.first.image.url }}" alt="{{ spot.spot_name }}">
        {% else %}
            <p>ã‚¤ãƒ™ãƒ³ãƒˆå†™çœŸãŒã‚ã‚Šã¾ã›ã‚“</p>
        {% endif %}
    </div>

    {# åŸºæœ¬æƒ…å ± #}
    <div class="info-section">

        <div class="info-row">
            <span class="info-label">ä½æ‰€</span>
            <span class="info-value">
                {% if spot and spot.address %}
                    {{ spot.address }}
                {% else %}
                    æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">å–¶æ¥­æ™‚é–“</span>
            <span class="info-value">
                {% if spot and spot.business_hours %}
                    {{ spot.business_hours }}
                {% else %}
                    ã€œ
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">é–‹å‚¬æ—¥</span>
            <span class="info-value">
                {% if event.event_date %}
                    {{ event.event_date|date:"Yå¹´næœˆjæ—¥" }}
                {% else %}
                    æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">ä¼šå ´</span>
            <span class="info-value">
                {% if event.venue %}
                    {{ event.venue }}
                {% elif spot %}
                    {{ spot.spot_name }}
                {% else %}
                    æœªç™»éŒ²
                {% endif %}
            </span>
        </div>

        <div class="info-row">
            <span class="info-label">å…¥å ´æ–™</span>
            <span class="info-value">ï¼ˆä»Šå¾ŒDBè¿½åŠ ï¼‰</span>
        </div>

        <div class="info-row">
            <span class="info-label">å£ã‚³ãƒŸ</span>
            {% if spot %}
                <a href="{% url 'spotapp:spot_detail' spot.spot_id %}#review" class="info-link">
                    å£ã‚³ãƒŸã‚’è¦‹ã‚‹
                </a>
            {% else %}
                <span class="info-value">å£ã‚³ãƒŸãªã—</span>
            {% endif %}
        </div>

        <div class="info-row">
            <span class="info-label">è©•ä¾¡</span>
            <span class="info-value">
                {% if avg_rating %}
                    â­ {{ avg_rating|floatformat:1 }}ï¼ˆ{{ review_count }}ä»¶ï¼‰
                {% else %}
                    è©•ä¾¡ãªã—
                {% endif %}
            </span>
        </div>

        {# è¦³å…‰åœ°ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ #}
        {% if spot %}
        <div class="spot-link-area">
            <a href="{% url 'spotapp:spot_detail' spot.spot_id %}"
               class="spot-link-btn">
                ğŸ“ ã“ã®è¦³å…‰åœ°ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ â†’
            </a>
        </div>
        {% endif %}

    </div>

    {# è©³ç´°èª¬æ˜ï¼šEvents.details ã‚’ä½¿ã† #}
    <section class="section-box">
        <h2>ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°èª¬æ˜</h2>
        {% if event.details %}
            <p>{{ event.details|linebreaksbr }}</p>
        {% else %}
            <p>ã‚¤ãƒ™ãƒ³ãƒˆã®èª¬æ˜ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
        {% endif %}
    </section>

    

    {# Mapï¼ˆæ©Ÿèƒ½äºˆå®šï¼‰ #}
    <section class="map-box">
        <h2>Mapï¼ˆæ©Ÿèƒ½äºˆå®šï¼‰</h2>

        {% if spot and spot.latitude and spot.longitude %}
            <p>åœ°å›³æ©Ÿèƒ½ã¯ä»Šå¾Œå®Ÿè£…äºˆå®šã§ã™ã€‚ï¼ˆç·¯åº¦ï¼š{{ spot.latitude }}, çµŒåº¦ï¼š{{ spot.longitude }}ï¼‰</p>
        {% else %}
            <p>åœ°å›³æ©Ÿèƒ½ã¯ç¾åœ¨æº–å‚™ä¸­ã§ã™ã€‚</p>
        {% endif %}

        <ul>
            <li>ç¾åœ¨åœ°ã‹ã‚‰ã®è·é›¢ãƒ»æ‰€è¦æ™‚é–“ï¼ˆå¾’æ­©ãƒ»è»Šãƒ»é›»è»Šï¼‰</li>
            <li>ãƒ«ãƒ¼ãƒˆæ¡ˆå†…</li>
            <li>å‘¨è¾ºæ–½è¨­ãƒ»ãƒ›ãƒ†ãƒ«æƒ…å ±è¡¨ç¤º</li>
        </ul>
    </section>

</main>

{% endblock %}
